<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>VILL: Semiconductor War Room</title>
  
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script>

  <style>
    /* 引入科幻字體 */
    @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Share+Tech+Mono&display=swap');
    
    body { margin: 0; overflow: hidden; background: #000; font-family: 'Rajdhani', sans-serif; }

    /* === UI 層 (HUD) === */
    #ui-layer {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 999;
    }

    /* 頂部標題欄 */
    .top-hud {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: linear-gradient(180deg, rgba(0, 10, 20, 0.9) 0%, transparent 100%);
      border-bottom: 1px solid rgba(0, 243, 255, 0.3);
    }
    .project-title {
      color: #00f3ff;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 2px;
      text-shadow: 0 0 10px rgba(0, 243, 255, 0.8);
    }
    .system-status {
      font-family: 'Share Tech Mono', monospace;
      color: #00ff9d;
      font-size: 14px;
      border: 1px solid #00ff9d;
      padding: 5px 10px;
      border-radius: 4px;
      animation: blink 2s infinite;
    }

    /* 右側懸浮資料卡 */
    #info-card {
      position: absolute;
      top: 15%; right: 30px;
      width: 350px;
      background: rgba(12, 20, 35, 0.85); /* 深藍半透明 */
      backdrop-filter: blur(12px); /* 毛玻璃效果 */
      border: 1px solid rgba(0, 243, 255, 0.5);
      border-left: 6px solid #00f3ff;
      border-radius: 0 10px 10px 0;
      padding: 25px;
      color: #fff;
      transform: translateX(120%); /* 預設隱藏 */
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
      pointer-events: auto; /* 允許滑鼠互動 */
      box-shadow: -10px 10px 40px rgba(0, 0, 0, 0.6);
    }
    #info-card.active { transform: translateX(0); }

    .card-header {
      display: flex; align-items: center; gap: 15px;
      margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 15px;
    }
    .card-icon {
      width: 50px; height: 50px;
      background: linear-gradient(135deg, #00f3ff, #0066ff);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 24px; font-weight: bold; color: #000;
      box-shadow: 0 0 15px rgba(0, 243, 255, 0.4);
    }
    .card-title { font-size: 24px; font-weight: 700; color: #fff; line-height: 1.1; }
    
    .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
    .stat-box { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 6px; }
    .stat-label { font-size: 12px; color: #8899a6; text-transform: uppercase; font-family: 'Share Tech Mono'; }
    .stat-value { font-size: 16px; color: #00f3ff; font-weight: bold; margin-top: 5px; }
    
    .card-desc { font-size: 14px; line-height: 1.6; color: #ccd; border-top: 1px dashed #444; padding-top: 15px; }

    /* 底部控制提示 */
    .controls {
      text-align: center; padding: 20px;
      background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, transparent 100%);
      color: #667; font-family: 'Share Tech Mono'; font-size: 12px;
    }

    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

    /* 載入失敗的備用提示 */
    #error-overlay {
      position: absolute; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.9); display: none;
      justify-content: center; align-items: center; flex-direction: column;
      color: white; z-index: 1000;
    }
  </style>
</head>

<body>

  <div id="error-overlay">
    <h2>MISSING MAP TEXTURE</h2>
    <p>Please ensure <b>map.jpg</b> is in the same folder.</p>
    <button onclick="location.reload()" style="padding:10px 20px; margin-top:10px; cursor:pointer;">RETRY SYSTEM</button>
  </div>

  <div id="ui-layer">
    <div class="top-hud">
      <div class="project-title">VILL SYSTEM <span style="font-size:14px; opacity:0.6; margin-left:10px;">// SEMICONDUCTOR INTELLIGENCE</span></div>
      <div class="system-status">● SYSTEM ONLINE</div>
    </div>
    
    <div id="info-card">
      <div class="card-header">
        <div class="card-icon" id="c-icon">S</div>
        <div class="card-title" id="c-title">SAMSUNG<br>CLUSTER</div>
      </div>
      <div id="c-content"></div>
    </div>

    <div class="controls">
      [ MOUSE LEFT ] ROTATE VIEW &nbsp;&nbsp; [ SCROLL ] ZOOM &nbsp;&nbsp; [ CLICK PINS ] ANALYZE DATA
    </div>
  </div>

  <a-scene renderer="antialias: true; colorManagement: true; physicallyCorrectLights: true;" cursor="rayOrigin: mouse" raycaster="objects: .clickable">
    
    <a-assets>
      <img id="map-tex" src="./map.jpg" onerror="document.getElementById('error-overlay').style.display='flex'">
    </a-assets>

    <a-entity environment="preset: tron; skyType: atmosphere; lighting: none; groundColor: #0a101a; gridColor: #00f3ff;"></a-entity>

    <a-light type="ambient" intensity="0.3"></a-light>
    <a-light type="directional" position="5 10 7" intensity="1.2" color="#ffffff" castShadow="true"></a-light>
    <a-light type="point" position="0 2 0" intensity="2" distance="10" color="#00f3ff"></a-light>

    <a-entity camera orbit-controls="target: 0 0 0; minDistance: 2; maxDistance: 6; initialPosition: 0 3 4; enablePan: false;"></a-entity>

    <a-entity position="0 0 0">
      
      <a-cylinder position="0 0.1 0" radius="1.6" height="0.2" color="#050a10" material="metalness:0.8; roughness:0.2"></a-cylinder>
      <a-torus position="0 0.2 0" rotation="90 0 0" radius="1.6" radius-tubular="0.015" color="#00f3ff" material="emissive: #00f3ff; emissiveIntensity: 2"></a-torus>
      
      <a-entity position="0 0.25 0" rotation="-90 0 0">
        
        <a-image 
          src="#map-tex" 
          width="2.2" height="2.2" 
          position="0 0 0.02"
          material="opacity: 0.95; shader: standard; emissive: #ffffff; emissiveIntensity: 0.2">
        </a-image>

        <a-plane width="2.2" height="0.05" color="#00f3ff" opacity="0.2" position="0 0 0.05">
           <a-animation attribute="position" from="0 -1 0.05" to="0 1 0.05" dur="4000" dir="alternate" repeat="indefinite" easing="linear"></a-animation>
        </a-plane>


        <a-entity position="-0.2 0.5 0.2" class="clickable pin" data-id="samsung">
           <a-ring radius-inner="0.05" radius-outer="0.06" color="#ffffff">
             <a-animation attribute="scale" to="2.5 2.5 1" dur="2000" repeat="indefinite"></a-animation>
             <a-animation attribute="material.opacity" from="1" to="0" dur="2000" repeat="indefinite"></a-animation>
           </a-ring>
           <a-sphere radius="0.06" color="#ffffff" position="0 0 0.1"></a-sphere>
           <a-cone radius-bottom="0.01" radius-top="0.06" height="0.2" color="#ffffff" rotation="90 0 0" position="0 0 0"></a-cone>
           <a-text value="SAMSUNG" align="center" position="0 -0.15 0.3" scale="0.6 0.6 0.6" color="#ffffff" font="mozillavr"></a-text>
        </a-entity>

        <a-entity position="0.3 0.1 0.2" class="clickable pin" data-id="nvidia">
           <a-ring radius-inner="0.05" radius-outer="0.06" color="#76b900">
             <a-animation attribute="scale" to="2.5 2.5 1" dur="2000" repeat="indefinite"></a-animation>
             <a-animation attribute="material.opacity" from="1" to="0" dur="2000" repeat="indefinite"></a-animation>
           </a-ring>
           <a-sphere radius="0.06" color="#76b900" position="0 0 0.1"></a-sphere>
           <a-cone radius-bottom="0.01" radius-top="0.06" height="0.2" color="#76b900" rotation="90 0 0" position="0 0 0"></a-cone>
           <a-text value="NVIDIA" align="center" position="0 -0.15 0.3" scale="0.6 0.6 0.6" color="#76b900" font="mozillavr"></a-text>
        </a-entity>

        <a-entity position="0.1 -0.5 0.2" class="clickable pin" data-id="intel">
           <a-ring radius-inner="0.05" radius-outer="0.06" color="#0071c5">
             <a-animation attribute="scale" to="2.5 2.5 1" dur="2000" repeat="indefinite"></a-animation>
             <a-animation attribute="material.opacity" from="1" to="0" dur="2000" repeat="indefinite"></a-animation>
           </a-ring>
           <a-sphere radius="0.06" color="#0071c5" position="0 0 0.1"></a-sphere>
           <a-cone radius-bottom="0.01" radius-top="0.06" height="0.2" color="#0071c5" rotation="90 0 0" position="0 0 0"></a-cone>
           <a-text value="INTEL" align="center" position="0 -0.15 0.3" scale="0.6 0.6 0.6" color="#0071c5" font="mozillavr"></a-text>
        </a-entity>

      </a-entity>
    </a-entity>
  </a-scene>

  <script>
    // 數據庫
    const db = {
      samsung: {
        title: 'SAMSUNG<br>NORTH CLUSTER',
        icon: 'S',
        html: `
          <div class="stat-grid">
            <div class="stat-box">
              <div class="stat-label">INVESTMENT</div>
              <div class="stat-value">$19.2 B</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">FOCUS</div>
              <div class="stat-value">MOBILE/R&D</div>
            </div>
          </div>
          <div class="card-desc">
            全球最大手機生產基地 (Bac Ninh)。享有北越接近中國供應鏈的地理優勢，並擁有東南亞最大的研發中心。
          </div>
        `
      },
      nvidia: {
        title: 'NVIDIA<br>CENTRAL HUB',
        icon: 'N',
        html: `
          <div class="stat-grid">
            <div class="stat-box">
              <div class="stat-label">LOCATION</div>
              <div class="stat-value">DA NANG</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">SECTOR</div>
              <div class="stat-value">AI CHIPS</div>
            </div>
          </div>
          <div class="card-desc">
            新興的設計與研發中心。Nvidia 與 FPT 合作建立 AI 工廠，利用中部地區的大學人才庫進行晶片設計。
          </div>
        `
      },
      intel: {
        title: 'INTEL<br>SOUTH CLUSTER',
        icon: 'I',
        html: `
          <div class="stat-grid">
            <div class="stat-box">
              <div class="stat-label">FACILITY</div>
              <div class="stat-value">IPV (ATM)</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">STATUS</div>
              <div class="stat-value">OPERATIONAL</div>
            </div>
          </div>
          <div class="card-desc">
            胡志明高科技園區 (SHTP) 是 Intel 全球最大的封裝測試廠。擁有最成熟的基礎設施與物流系統。
          </div>
        `
      }
    };

    // 互動邏輯
    const card = document.getElementById('info-card');
    const cTitle = document.getElementById('c-title');
    const cIcon = document.getElementById('c-icon');
    const cContent = document.getElementById('c-content');

    document.querySelectorAll('.pin').forEach(pin => {
      // 滑鼠移入特效
      pin.addEventListener('mouseenter', function() {
        this.object3D.scale.set(1.2, 1.2, 1.2);
        document.body.style.cursor = 'pointer';
      });
      // 滑鼠移出特效
      pin.addEventListener('mouseleave', function() {
        this.object3D.scale.set(1, 1, 1);
        document.body.style.cursor = 'default';
      });

      // 點擊事件
      pin.addEventListener('click', function(evt) {
        evt.stopPropagation();
        const id = this.getAttribute('data-id');
        const data = db[id];

        // 填入資料
        cTitle.innerHTML = data.title;
        cIcon.innerText = data.icon;
        cContent.innerHTML = data.html;

        // 顯示卡片
        card.classList.add('active');
      });
    });

    // 點擊空白處關閉
    document.querySelector('a-scene').addEventListener('click', (evt) => {
      if (!evt.target.classList.contains('clickable')) {
        card.classList.remove('active');
      }
    });
  </script>
</body>
</html>
